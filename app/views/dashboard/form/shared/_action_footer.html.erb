<% primary_action = local_assigns.fetch(:primary_action, :save_and_continue) %>
<% secondary_action = current_user.admin? ? :admin_save : param_key %>

<footer class="footer footer--actions footer--fixed d-flex justify-content-center">
  <div>
    <span data-controller="publishing-check">
    <% if allow_curation? %>
      <%= button_tag t("dashboard.form.actions.request_curation.button"), type: "button", data: { action:"publishing-check#openDialog", dialog: "curation", toggle: 'tooltip', placement: 'top', title: t("dashboard.form.actions.request_curation.tooltip") }, class: 'btn btn-primary btn--rounded' %>
    <% end %>

    <% if allow_publish? || primary_action == :save_and_continue %>
      <% if primary_action == :publish %>
        <!-- show submit button -->
          <%= button_tag t("dashboard.form.actions.publish.button"), type: "button", data: { action:"publishing-check#openDialog", dialog: "publish", toggle: 'tooltip', placement: 'top', title: t("dashboard.form.actions.#{primary_action}.tooltip") }, class: 'btn btn-primary btn--rounded' %>
          <%= render 'publish_dialog', f: form %>
          <% else %>
          <%= form.submit t("dashboard.form.actions.#{primary_action}.button"), name: primary_action, data: { toggle: 'tooltip', placement: 'top', title: t("dashboard.form.actions.#{primary_action}.tooltip") }, class: 'btn btn-primary btn--rounded' %>
          <% end %>
          <% end %>
    </span>

    <%= link_to t('dashboard.form.actions.cancel.button'), cancel_path, data: { toggle: 'tooltip', placement: 'top', title: t('dashboard.form.actions.cancel.tooltip') }, class: 'btn btn-outline-dark btn--rounded ml-2' %>
  </div>

  <%= form.button t("dashboard.form.actions.save_and_exit.#{secondary_action}"), name: 'save_and_exit', data: { toggle: 'tooltip', placement: 'top', title: t('dashboard.form.actions.save_and_exit.tooltip') }, class: 'btn btn-outline-primary btn--rounded pull-left' %>

  <% if form.object.persisted? && policy(form.object).destroy? %>
    <%= render DeleteResourceButtonComponent.new(
          resource: form.object,
          html_class: 'btn btn-outline-danger btn--rounded pull-right',
          hide_if_published: true
        ) %>
  <% end %>
</footer>
